# 🌳 动态图文详情页 - 纯结构架构图标准模板

> **基于纯结构架构图标准模板的完整页面设计文档**  
> 生成时间：2025年9月23日  
> 页面类型：动态图文详情页  
> 设计原则：SMART-V+ 增强原则 + 4C+1 设计标准

---

## 🌳 动态图文详情页 - 树状图（页面结构视角）

```
【动态图文详情页模块】★★★
│
├── 【动态详情主页面】📱（复杂页面标注 - 全屏沉浸式设计）
│   ├── 📱 系统状态栏 (iOS适配 - 44px高度)
│   │   ├── 🕐 时间显示 "9:41" (左侧 - 17sp白色粗体)
│   │   ├── 📶 信号强度指示器 (右侧区域 - 白色图标)
│   │   ├── 📶 WiFi连接指示器 (右侧区域 - 白色图标)
│   │   └── 🔋 电池电量指示器 (右侧 - 白色图标+百分比)
│   │
│   ├── 🔝 页面导航栏 (透明悬浮 - 高度56px - 半透明背景)
│   │   ├── 🔙「<」返回按钮 (左上角 - 白色箭头图标 24x24px)
│   │   │   ├── 按钮样式：半透明黑色圆形背景32x32px + 白色箭头
│   │   │   ├── 点击效果：0.2s缩放动画 + 背景变化
│   │   │   └── 跳转功能：返回动态列表页面
│   │   └── ⋯「更多」按钮 (右上角 - 白色三点图标 24x24px)
│   │       ├── 按钮样式：半透明黑色圆形背景32x32px + 白色三点
│   │       ├── 点击效果：0.2s缩放动画 + 弹出操作菜单
│   │       └── 功能菜单：举报/分享/收藏/不感兴趣等选项
│   │
│   ├── 🖼️ 主图展示区域 (全屏背景图 - 占据上半屏幕)
│   │   ├── 📷 动态主图片 (全屏显示 - 等比缩放)
│   │   │   ├── 图片样式：无圆角 + 自适应宽高比
│   │   │   ├── 图片加载：渐进式加载 + 模糊到清晰
│   │   │   ├── 图片交互：双击放大 + 捏合缩放手势
│   │   │   └── 背景处理：高斯模糊背景 + 主图居中显示
│   │   ├── 📍 图片指示器 (底部居中 - 多图时显示)
│   │   │   ├── 指示器样式：白色圆点8x8px + 当前页高亮
│   │   │   ├── 间距布局：圆点间距12px + 水平居中
│   │   │   └── 滑动交互：左右滑动切换图片
│   │   └── 🎨 渐变遮罩层 (底部渐变 - 便于文字显示)
│   │       ├── 渐变效果：透明到半透明黑色 rgba(0,0,0,0.4)
│   │       └── 渐变高度：底部100px渐变区域
│   │
│   ├── 📋 内容信息卡片 (底部内容区 - 白色背景)
│   │   ├── 📱 卡片容器 (白色背景 + 顶部圆角24px + 向上滑动手势)
│   │   │   ├── 容器样式：白色背景 + 阴影4px + 顶部圆角
│   │   │   ├── 滑动指示器：顶部居中灰色横条32x4px + 圆角2px
│   │   │   └── 滑动交互：上滑展开详情 + 下滑收起
│   │   │
│   │   ├── 👤 用户信息区域 (卡片顶部 - 高度72px)
│   │   │   ├── 🖼️ 用户头像 (左侧 - 圆形48x48px)
│   │   │   │   ├── 头像样式：圆形裁剪 + 2px白色边框
│   │   │   │   ├── 头像加载：占位图 + 渐进式加载
│   │   │   │   └── 点击功能：查看用户详情页面
│   │   │   ├── 📝 用户信息文字区域 (头像右侧 - 左边距16px)
│   │   │   │   ├── 📝 用户昵称 "门前游过一群鸭" (16sp黑色粗体)
│   │   │   │   │   ├── 昵称样式：16sp #000000 + 粗体字重500
│   │   │   │   │   └── 点击功能：查看用户详情页面
│   │   │   │   └── 🔴 粉丝数量 "19" (昵称右侧 - 12sp粉色)
│   │   │   │       ├── 数量样式：12sp #FF69B4 + 圆形背景
│   │   │   │       └── 显示逻辑：显示粉丝数量统计
│   │   │   └── 💜「关注」按钮 (右侧 - 64x32px)
│   │   │       ├── 按钮样式：渐变紫色背景#8A2BE2到#9370DB + 白色文字
│   │   │       ├── 按钮尺寸：64x32px + 圆角16px
│   │   │       ├── 文字样式：14sp白色 + 字重500
│   │   │       ├── 点击效果：0.2s缩放动画 + 状态切换
│   │   │       ├── 状态变化：关注→已关注→互相关注
│   │   │       └── 功能逻辑：发送关注请求 + 更新关注状态
│   │   │
│   │   ├── 📝 动态内容区域 (用户信息下方 - 左右边距16px)
│   │   │   ├── 📝 动态标题 "新赛季，新征程" (18sp黑色粗体)
│   │   │   │   ├── 标题样式：18sp #000000 + 粗体字重600
│   │   │   │   ├── 行间距：1.4倍行高
│   │   │   │   └── 底部间距：8px间距到内容
│   │   │   ├── 📝 动态正文内容 (16sp灰黑色 - 多行文本)
│   │   │   │   ├── 正文文字："英雄联盟2021新赛季已开启，段位解锁更改让赛季初上分更激动人心❤️，速速"
│   │   │   │   ├── 文字样式：16sp #333333 + 常规字重400
│   │   │   │   ├── 行间距：1.5倍行高 + 段落间距12px
│   │   │   │   ├── 表情支持：原生Emoji表情显示
│   │   │   │   └── 文字交互：长按显示复制/翻译选项
│   │   │   └── 🏷️ 话题标签区域 (内容下方 - 顶部间距12px)
│   │   │       ├── 🏷️ 话题标签1 "#S10全球总决赛" (蓝色标签)
│   │   │       │   ├── 标签样式：14sp #1890FF + 无背景
│   │   │       │   ├── 标签前缀："#" 符号
│   │   │       │   └── 点击功能：进入话题详情页面
│   │   │       └── 🏷️ 话题标签2 "#S10全球总决赛" (重复标签)
│   │   │
│   │   ├── 📍 位置时间信息区域 (内容下方 - 顶部间距16px)
│   │   │   ├── 📅 发布时间 "01-10" (左侧 - 14sp灰色)
│   │   │   │   ├── 时间样式：14sp #666666 + 常规字重
│   │   │   │   └── 时间格式：MM-DD格式显示
│   │   │   ├── 📍 发布地点 "河北" (时间右侧 - 间距16px)
│   │   │   │   ├── 地点样式：14sp #666666 + 常规字重
│   │   │   │   └── 点击功能：查看地点相关动态
│   │   │   └── 📏 分隔线 (底部 - 1px浅灰色)
│   │   │       └── 分隔线样式：1px #F0F0F0 + 左右边距16px
│   │   │
│   │   ├── 💬 评论预览区域 (位置信息下方 - 顶部间距16px)
│   │   │   ├── 📊 评论标题行 (顶部区域)
│   │   │   │   ├── 📝 评论标题 "评论" (左侧 - 16sp黑色粗体)
│   │   │   │   └── 📝 评论数量 "1条" (标题右侧 - 14sp灰色)
│   │   │   │       └── 数量显示：实时更新评论总数
│   │   │   └── 💬 评论列表预览 (标题下方 - 顶部间距12px)
│   │   │       └── 💬《评论项1》📋 (评论卡片 - 高度auto)
│   │   │           ├── 👤 评论者头像 (左侧 - 圆形32x32px)
│   │   │           │   ├── 头像样式：圆形裁剪 + 1px浅灰边框
│   │   │           │   └── 点击功能：查看评论者详情
│   │   │           ├── 📝 评论内容区域 (头像右侧 - 左边距12px)
│   │   │           │   ├── 📝 评论者昵称 "最萌皮皮虾" (14sp黑色粗体)
│   │   │           │   │   └── 昵称样式：14sp #000000 + 粗体字重500
│   │   │           │   ├── 📝 评论内容 "人皮话多不高冷的真实写照" (14sp灰黑色)
│   │   │           │   │   ├── 内容样式：14sp #333333 + 常规字重
│   │   │           │   │   ├── 行间距：1.4倍行高
│   │   │           │   │   └── 点击功能：展开评论详情
│   │   │           │   └── 🕐 评论时间地点 "昨天19:00 广东" (12sp浅灰色)
│   │   │           │       ├── 时间样式：12sp #999999 + 常规字重
│   │   │           │       └── 格式显示：相对时间 + 地点信息
│   │   │           └── 👍 评论点赞数 "11" (右侧 - 12sp灰色)
│   │   │               ├── 点赞样式：12sp #999999 + 点赞图标
│   │   │               └── 点击功能：点赞/取消点赞评论
│   │   │
│   │   └── 🔧 底部交互操作栏 (卡片底部 - 高度64px)
│   │       ├── 📱 操作栏容器 (白色背景 + 顶部分隔线1px)
│   │       │   ├── 容器样式：白色背景 + 顶部1px #F0F0F0分隔线
│   │       │   └── 内边距：左右16px + 上下12px
│   │       ├── 💬「写评论」按钮 (左侧 - 占据剩余空间)
│   │       │   ├── 按钮样式：浅灰色背景#F8F8F8 + 圆角20px
│   │       │   ├── 按钮文字："写评论" (14sp灰色 + 左对齐)
│   │       │   ├── 按钮尺寸：自适应宽度 + 高度40px
│   │       │   ├── 点击效果：0.1s背景色变化
│   │       │   └── 跳转功能：打开评论输入框
│   │       ├── ❤️「点赞」按钮 (右侧区域 - 48x40px)
│   │       │   ├── 按钮图标：爱心图标20x20px + 数字标签
│   │       │   ├── 点赞数量："28" (图标下方 - 12sp灰色)
│   │       │   ├── 状态切换：空心❤️/实心❤️ + 颜色变化
│   │       │   ├── 点击效果：0.3s心跳动画 + 粒子特效
│   │       │   └── 功能逻辑：点赞/取消点赞 + 数量更新
│   │       ├── ⭐「收藏」按钮 (右侧区域 - 48x40px)
│   │       │   ├── 按钮图标：星星图标20x20px + 数字标签
│   │       │   ├── 收藏数量："28" (图标下方 - 12sp灰色)
│   │       │   ├── 状态切换：空心⭐/实心⭐ + 颜色变化
│   │       │   ├── 点击效果：0.3s闪烁动画 + 缩放效果
│   │       │   └── 功能逻辑：收藏/取消收藏 + 数量更新
│   │       └── 💬「评论」按钮 (右侧区域 - 48x40px)
│   │           ├── 按钮图标：对话框图标20x20px + 数字标签
│   │           ├── 评论数量："28" (图标下方 - 12sp灰色)
│   │           ├── 点击效果：0.2s缩放动画
│   │           └── 跳转功能：进入评论详情页面
│   │
│   └── 📱 底部安全区域 (iPhone适配 - 34px高度)
│       └── 安全区域样式：白色背景 + 底部安全距离
│
├── 【评论详情弹窗】📱（全屏模态页面）
│   ├── 📱 弹窗容器 (全屏模态 - 从底部滑入)
│   │   ├── 🔝 评论页导航栏 (固定头部 - 高度56px)
│   │   │   ├── 🔙「<」返回按钮 (左上角 - 黑色箭头24x24px)
│   │   │   ├── 📝 页面标题 "评论" (居中 - 18sp黑色粗体)
│   │   │   └── 📤「分享」按钮 (右上角 - 灰色分享图标24x24px)
│   │   ├── 📋 评论列表区域 (滚动内容区)
│   │   │   └── 《评论列表容器》📋 (垂直滚动列表)
│   │   │       ├── 💬《评论项详情》📋 (展开的评论卡片)
│   │   │       └── 🔄 加载更多机制 (上滑加载历史评论)
│   │   └── 📝 评论输入区域 (固定底部 - 自适应高度)
│   │       ├── 《评论输入框》📋 (多行文本输入)
│   │       ├── 📤「发送」按钮 (右侧 - 紫色圆形按钮)
│   │       └── 🎤「语音」按钮 (可选功能)
│   │
│   └── 📱 分享/转发抽屉弹窗 (从更多按钮触发)
│       ├── 📋 抽屉容器 (底部弹出 - 高度460px + 安全区域)
│       │   ├── 🎨 抽屉背景 (白色背景 + 顶部圆角24px + 阴影8px)
│       │   ├── 📏 拖拽指示器 (顶部居中灰色横条40x4px + 圆角2px)
│       │   └── 📱 内容区域 (左右边距24px + 顶部间距20px)
│       │
│       ├── 📝 抽屉标题区域 (顶部区域 - 高度40px)
│       │   ├── 📝 标题文字 "分享/转发" (居中 - 18sp黑色粗体)
│       │   │   ├── 标题样式：18sp #000000 + 粗体字重600
│       │   │   └── 位置布局：水平居中 + 顶部对齐
│       │   └── ❌「关闭」按钮 (右上角 - 24x24px灰色X图标)
│       │       ├── 按钮样式：透明背景 + 灰色图标#999999
│       │       ├── 点击效果：0.2s缩放动画
│       │       └── 关闭功能：收起抽屉弹窗
│       │
│       ├── 🚀 快捷分享功能区 (标题下方 - 顶部间距24px)
│       │   ├── 📊 功能区标题 "快捷分享" (左对齐 - 16sp灰色)
│       │   │   └── 标题样式：16sp #666666 + 常规字重400
│       │   └── 🔄 分享选项网格 (5列网格布局 - 顶部间距16px)
│       │       ├── 👥《好友分享》📋 (第1列 - 64x88px卡片)
│       │       │   ├── 📱 卡片容器 (透明背景 + 垂直布局)
│       │       │   ├── 🎯 功能图标容器 (顶部 - 64x64px圆形)
│       │       │   │   ├── 👥 好友图标 (紫色圆形背景#8A2BE2 + 白色用户图标32x32px)
│       │       │   │   │   ├── 图标样式：渐变紫色背景 + 白色图标
│       │       │   │   │   ├── 容器样式：64x64px圆形 + 阴影2px
│       │       │   │   │   └── 点击效果：0.2s缩放动画 + 背景加深
│       │       │   │   └── 🔴 通知角标 (右上角 - 可选显示)
│       │       │   │       ├── 角标样式：16x16px红色圆形 + 白色数字
│       │       │   │       └── 显示逻辑：有新消息时显示数量
│       │       │   ├── 📝 功能标题 "好友" (图标下方 - 12sp黑色)
│       │       │   │   ├── 标题样式：12sp #000000 + 常规字重400
│       │       │   │   ├── 位置布局：水平居中 + 顶部间距8px
│       │       │   │   └── 文字限制：单行显示，超出省略
│       │       │   └── 点击功能：打开好友列表选择分享对象
│       │       │
│       │       ├── 💬《微信分享》📋 (第2列 - 相同尺寸规格)
│       │       │   ├── 📱 卡片容器 (相同样式规格)
│       │       │   ├── 🎯 功能图标容器 (64x64px圆形)
│       │       │   │   ├── 💬 微信图标 (绿色圆形背景#07C160 + 白色微信图标32x32px)
│       │       │   │   │   ├── 图标样式：微信绿色背景 + 白色对话图标
│       │       │   │   │   ├── 容器样式：64x64px圆形 + 阴影2px
│       │       │   │   │   └── 点击效果：0.2s缩放动画 + 背景加深
│       │       │   │   └── 🔗 分享类型指示 (右下角小图标 - 可选)
│       │       │   ├── 📝 功能标题 "微信" (图标下方 - 12sp黑色)
│       │       │   └── 点击功能：调用微信SDK分享到微信好友
│       │       │
│       │       ├── 🐧《QQ分享》📋 (第3列 - 相同尺寸规格)
│       │       │   ├── 📱 卡片容器 (相同样式规格)
│       │       │   ├── 🎯 功能图标容器 (64x64px圆形)
│       │       │   │   ├── 🐧 QQ图标 (蓝色圆形背景#1296DB + 白色QQ图标32x32px)
│       │       │   │   │   ├── 图标样式：QQ蓝色背景 + 白色企鹅图标
│       │       │   │   │   ├── 容器样式：64x64px圆形 + 阴影2px
│       │       │   │   │   └── 点击效果：0.2s缩放动画 + 背景加深
│       │       │   │   └── 📱 平台标识 (右下角 - 手机图标)
│       │       │   ├── 📝 功能标题 "QQ" (图标下方 - 12sp黑色)
│       │       │   └── 点击功能：调用QQ SDK分享到QQ好友
│       │       │
│       │       ├── 🌐《微博分享》📋 (第4列 - 相同尺寸规格)
│       │       │   ├── 📱 卡片容器 (相同样式规格)
│       │       │   ├── 🎯 功能图标容器 (64x64px圆形)
│       │       │   │   ├── 🌐 微博图标 (橙红色圆形背景#FF8200 + 白色微博图标32x32px)
│       │       │   │   │   ├── 图标样式：微博橙红色背景 + 白色wb图标
│       │       │   │   │   ├── 容器样式：64x64px圆形 + 阴影2px
│       │       │   │   │   └── 点击效果：0.2s缩放动画 + 背景加深
│       │       │   │   └── 🔥 热门标识 (右上角 - 火焰图标)
│       │       │   ├── 📝 功能标题 "微博" (图标下方 - 12sp黑色)
│       │       │   └── 点击功能：调用微博SDK分享到新浪微博
│       │       │
│       │       └── 🚨《举报功能》📋 (第5列 - 相同尺寸规格)
│       │           ├── 📱 卡片容器 (相同样式规格)
│       │           ├── 🎯 功能图标容器 (64x64px圆形)
│       │           │   ├── 🚨 举报图标 (灰色圆形背景#999999 + 白色感叹号图标32x32px)
│       │           │   │   ├── 图标样式：灰色背景 + 白色警告图标
│       │           │   │   ├── 容器样式：64x64px圆形 + 阴影2px
│       │           │   │   └── 点击效果：0.2s缩放动画 + 红色闪烁
│       │           │   └── ⚠️ 警告标识 (右上角 - 红色三角警告)
│       │           ├── 📝 功能标题 "举报" (图标下方 - 12sp黑色)
│       │           └── 点击功能：打开举报页面选择举报类型
│       │
│       ├── 📏 分隔线区域 (快捷分享下方 - 顶部间距32px)
│       │   └── 📏 水平分隔线 (1px浅灰色#F0F0F0 + 左右边距0px)
│       │
│       ├── 🔧 更多操作功能区 (分隔线下方 - 顶部间距24px)
│       │   ├── 📊 功能区标题 "更多操作" (左对齐 - 16sp灰色)
│       │   │   └── 标题样式：16sp #666666 + 常规字重400
│       │   └── 📋 操作选项列表 (垂直列表 - 顶部间距16px)
│       │       ├── 📤《分享链接》📋 (操作项 - 高度56px)
│       │       │   ├── 📱 项目容器 (透明背景 + 水平布局 + 左右边距0px)
│       │       │   ├── 🔗 功能图标 (左侧 - 24x24px链接图标)
│       │       │   │   ├── 图标样式：24x24px蓝色链接图标#1890FF
│       │       │   │   └── 图标位置：垂直居中 + 左边距0px
│       │       │   ├── 📝 功能信息区域 (图标右侧 - 左边距16px)
│       │       │   │   ├── 📝 功能标题 "复制分享链接" (16sp黑色)
│       │       │   │   │   └── 标题样式：16sp #000000 + 常规字重400
│       │       │   │   └── 📝 功能描述 "复制链接到剪贴板" (14sp灰色)
│       │       │   │       └── 描述样式：14sp #999999 + 常规字重400
│       │       │   ├── 📱 右侧箭头 (右边距16px - 16x16px灰色箭头)
│       │       │   │   └── 箭头样式：16x16px灰色向右箭头#CCCCCC
│       │       │   └── 点击功能：复制动态分享链接到剪贴板
│       │       │
│       │       ├── 💾《保存图片》📋 (操作项 - 高度56px)
│       │       │   ├── 📱 项目容器 (相同样式规格)
│       │       │   ├── 💾 功能图标 (24x24px绿色下载图标#52C41A)
│       │       │   ├── 📝 功能信息区域
│       │       │   │   ├── 📝 功能标题 "保存图片到相册" (16sp黑色)
│       │       │   │   └── 📝 功能描述 "保存动态图片到本地" (14sp灰色)
│       │       │   ├── 📱 右侧箭头 (相同样式)
│       │       │   └── 点击功能：保存动态图片到系统相册
│       │       │
│       │       ├── 🚫《不感兴趣》📋 (操作项 - 高度56px)
│       │       │   ├── 📱 项目容器 (相同样式规格)
│       │       │   ├── 🚫 功能图标 (24x24px橙色屏蔽图标#FF7A00)
│       │       │   ├── 📝 功能信息区域
│       │       │   │   ├── 📝 功能标题 "不感兴趣" (16sp黑色)
│       │       │   │   └── 📝 功能描述 "减少相似内容推荐" (14sp灰色)
│       │       │   ├── 📱 右侧箭头 (相同样式)
│       │       │   └── 点击功能：标记内容偏好并调整推荐算法
│       │       │
│       │       └── ⭐《添加收藏》📋 (操作项 - 高度56px)
│       │           ├── 📱 项目容器 (相同样式规格)
│       │           ├── ⭐ 功能图标 (24x24px金色星星图标#FFD700)
│       │           ├── 📝 功能信息区域
│       │           │   ├── 📝 功能标题 "添加到收藏" (16sp黑色)
│       │           │   └── 📝 功能描述 "收藏到我的收藏夹" (14sp灰色)
│       │           ├── 📱 右侧箭头 (相同样式)
│       │           └── 点击功能：将动态添加到用户收藏列表
│       │
│       ├── 📏 底部分隔线区域 (更多操作下方 - 顶部间距32px)
│       │   └── 📏 水平分隔线 (1px浅灰色#F0F0F0 + 左右边距0px)
│       │
│       ├── ❌ 取消按钮区域 (底部区域 - 高度64px)
│       │   ├── 📱 按钮容器 (全宽度 + 水平居中)
│       │   └── ❌「取消」按钮 (居中 - 宽度120px + 高度40px)
│       │       ├── 按钮样式：浅灰色背景#F8F8F8 + 圆角20px + 边框1px #E0E0E0
│       │       ├── 按钮文字："取消" (16sp灰色#666666 + 常规字重)
│       │       ├── 点击效果：0.2s背景色变化 + 缩放动画
│       │       └── 关闭功能：收起整个分享抽屉弹窗
│       │
│       └── 📱 底部安全区域 (iPhone适配 - 34px高度)
│           └── 安全区域样式：白色背景 + 底部安全距离
│
├── 【状态管理层】📱（多状态智能管理 - 支持图文/视频/交互状态）
│   ├── 🎬 内容类型状态管理
│   │   ├── 🖼️ 图文动态状态
│   │   │   ├── 静态图片展示控制 (无播放按钮 + 图片交互)
│   │   │   ├── 图片指示器管理 (多图时显示白色圆点)
│   │   │   └── 图片浏览状态 (双击放大 + 左右滑动)
│   │   └── 🎬 视频动态状态
│   │       ├── 视频播放器控制 (▶️播放按钮 + 控制栏)
│   │       ├── 播放状态管理 (播放/暂停/进度/音量)
│   │       ├── 全屏状态控制 (双击全屏 + 横屏适配)
│   │       └── 视频加载状态 (加载中/失败/重试)
│   │
│   ├── 💖 交互状态管理
│   │   ├── 点赞状态控制
│   │   │   ├── 未点赞状态：空心❤️ + 灰色#999999 + 总数显示
│   │   │   ├── 已点赞状态：实心❤️ + 红色#FF4444 + 数字角标
│   │   │   ├── 状态切换动画：0.3s心跳动画 + 粒子特效
│   │   │   └── 乐观更新策略：先更新UI + 后同步服务器
│   │   ├── 收藏状态控制
│   │   │   ├── 未收藏状态：空心⭐ + 灰色#999999 + 总数显示
│   │   │   ├── 已收藏状态：实心⭐ + 橙色#FFD700 + 光芒特效
│   │   │   ├── 状态切换动画：0.3s闪烁+缩放 + 光芒扩散
│   │   │   └── 收藏列表同步：添加/移除用户收藏列表
│   │   └── 评论状态控制
│   │       ├── 评论数量动态显示：1条/28条/888条自适应
│   │       ├── 评论输入状态：激活/输入中/发送中/完成
│   │       └── 评论列表更新：实时追加新评论 + 数量更新
│   │
│   ├── 🏷️ 动态元素状态
│   │   ├── 话题标签显示状态
│   │   │   ├── 完整显示：#S10全球总决赛 (蓝色链接)
│   │   │   ├── 条件隐藏：特定交互状态下隐藏标签
│   │   │   └── 动态恢复：根据用户行为智能显示
│   │   ├── 位置时间信息状态
│   │   │   ├── 简化显示：01-10 河北 (基础信息)
│   │   │   ├── 详细显示：2021-1-18 河南 (完整信息)
│   │   │   └── 格式切换：根据内容重要性自动选择
│   │   └── 用户角标状态
│   │       ├── 点赞角标：红色数字"11" (显示用户点赞排名)
│   │       ├── 角标位置：图标右上角-2px偏移
│   │       └── 显示逻辑：点赞后显示 + 取消后隐藏
│   │
│   └── 🔄 状态同步机制
│       ├── 实时状态同步：WebSocket监听其他用户操作
│       ├── 状态持久化：Redux/Zustand + AsyncStorage
│       ├── 状态回滚机制：网络失败时恢复之前状态
│       └── 跨页面状态：动态列表 + 个人页面状态同步
│
└── 🔧 系统支持层（技术服务层）
    ├── 📡 内容服务
    │   ├── 「动态数据API」（注：获取动态详情数据）
    │   ├── 「图片加载服务」（注：图片压缩和缓存）
    │   ├── 「视频流服务」（注：视频播放和缓存）
    │   └── 「评论系统API」（注：评论CRUD操作）
    ├── 👤 用户服务
    │   ├── 「用户关系API」（注：关注/取关操作）
    │   ├── 「用户信息API」（注：获取用户详情）
    │   └── 「权限验证服务」（注：操作权限检查）
    ├── 💾 数据管理
    │   ├── 「本地缓存服务」（注：离线数据存储）
    │   ├── 「状态管理服务」（注：Redux状态树管理）
    │   ├── 「状态同步服务」（注：多端状态实时同步）
    │   └── 「数据预加载」（注：相关内容预加载）
    ├── 🎯 状态计算服务
    │   ├── 「状态计算引擎」（注：根据用户操作计算新状态）
    │   ├── 「状态验证服务」（注：验证状态变更合法性）
    │   └── 「状态依赖管理」（注：管理状态间依赖关系）
    └── 📊 统计服务
        ├── 「浏览统计」（注：动态查看数据统计）
        ├── 「互动统计」（注：点赞收藏评论统计）
        ├── 「状态变更追踪」（注：记录所有状态变更）
        └── 「用户行为分析」（注：用户操作路径分析）
```

---

## 🔄 动态图文详情页 - 流程图（用户操作视角）

```
开始
 ↓
【进入动态图文详情页】
 ├─→ 从动态列表点击进入
 ├─→ 从推荐流点击进入
 ├─→ 从用户主页点击进入
 ├─→ 从分享链接点击进入
 └─→ 从搜索结果点击进入
 ↓
【页面数据加载初始化】
 ↓
数据加载流程
 ├─→ 加载动态详情数据
 │    ├─→ 获取动态基本信息（标题/内容/时间/地点）
 │    ├─→ 获取用户信息（头像/昵称/粉丝数）
 │    ├─→ 获取互动数据（点赞数/收藏数/评论数）
 │    └─→ 获取图片资源（主图/用户头像）
 ├─→ 加载评论预览数据
 │    ├─→ 获取最新评论列表（前3条）
 │    ├─→ 获取评论者信息
 │    └─→ 获取评论互动数据
 ├─→ 初始化用户状态
 │    ├─→ 检查关注状态（已关注/未关注/互相关注）
 │    ├─→ 检查点赞状态（已点赞/未点赞）
 │    ├─→ 检查收藏状态（已收藏/未收藏）
 │    └─→ 检查用户权限（评论权限/举报权限）
 └─→ 启动实时数据更新监听
 ↓
用户操作选择
 ├─→ 【图片浏览操作】（主要视觉交互路径）
 │    ↓
 │   【图片展示区交互】
 │    ├─→ 单张图片浏览
 │    │    ├─→ 图片自适应显示 → 查看完整图片
 │    │    ├─→ 双击图片 → 放大查看 → 捏合缩放手势
 │    │    ├─→ 长按图片 → 显示操作菜单
 │    │    │    ├─→ 保存图片到相册
 │    │    │    ├─→ 分享图片给好友
 │    │    │    ├─→ 复制图片链接
 │    │    │    └─→ 举报不当内容
 │    │    └─→ 单击空白区域 → 返回正常显示
 │    │
 │    ├─→ 多张图片浏览（如果有多图）
 │    │    ├─→ 左右滑动切换图片
 │    │    ├─→ 查看图片指示器更新
 │    │    ├─→ 双击当前图片放大查看
 │    │    └─→ 图片切换动画效果（0.3s滑动）
 │    │
 │    └─→ 图片加载状态处理
 │         ├─→ 加载中 → 显示骨架屏/模糊占位图
 │         ├─→ 加载成功 → 渐进式清晰显示（0.5s渐入）
 │         ├─→ 加载失败 → 显示重试按钮 → 点击重新加载
 │         └─→ 网络优化 → 根据网速调整图片质量
 │
 ├─→ 【用户交互操作】（社交功能核心路径）
 │    ↓
 │   【用户信息区域交互】
 │    ├─→ 点击用户头像
 │    │    ↓
 │    │   【进入用户详情页面】
 │    │    ├─→ 查看用户完整资料
 │    │    ├─→ 查看用户其他动态
 │    │    ├─→ 查看用户粉丝关注列表
 │    │    └─→ 返回动态详情页面
 │    │
 │    ├─→ 点击用户昵称
 │    │    ↓
 │    │   【相同的用户详情页面跳转】
 │    │
 │    ├─→ 点击关注按钮
 │    │    ↓
 │    │   【关注状态切换流程】
 │    │    ├─→ 未关注状态 → 发送关注请求
 │    │    │    ├─→ 请求成功 → 按钮变为"已关注"（0.2s缩放动画）
 │    │    │    ├─→ 粉丝数量+1 → 实时更新显示
 │    │    │    ├─→ 显示成功提示 → "关注成功"toast
 │    │    │    └─→ 关注关系建立 → 可接收对方动态推送
 │    │    │
 │    │    ├─→ 已关注状态 → 取消关注确认
 │    │    │    ├─→ 弹出确认对话框 → "确定取消关注吗？"
 │    │    │    ├─→ 确认取消 → 按钮变为"关注"
 │    │    │    ├─→ 粉丝数量-1 → 实时更新显示
 │    │    │    └─→ 取消操作 → 保持已关注状态
 │    │    │
 │    │    └─→ 互相关注状态 → 特殊处理
 │    │         ├─→ 按钮显示"互相关注" → 特殊样式
 │    │         ├─→ 取消关注 → 变为"已关注"
 │    │         └─→ 保持双向关注关系
 │    │
 │    └─→ 查看粉丝数量信息
 │         ├─→ 点击粉丝数字 → 查看粉丝列表页面
 │         └─→ 实时更新粉丝数量变化
 │
 ├─→ 【内容互动操作】（核心互动功能路径）
 │    ↓
 │   【动态内容区域交互】
 │    ├─→ 浏览动态内容
 │    │    ├─→ 阅读动态标题和正文
 │    │    ├─→ 长按文字内容 → 显示复制/翻译选项
 │    │    ├─→ 点击话题标签 → 进入话题详情页面
 │    │    │    ├─→ 查看话题相关动态列表
 │    │    │    ├─→ 查看话题统计信息
 │    │    │    ├─→ 关注/取关话题
 │    │    │    └─→ 发布话题相关动态
 │    │    └─→ 点击位置信息 → 查看地点相关动态
 │    │
 │    ├─→ 底部操作栏交互
 │    │    ├─→ 点击"写评论"按钮
 │    │    │    ↓
 │    │    │   【打开评论输入框】
 │    │    │    ├─→ 输入框自动聚焦 → 弹出键盘
 │    │    │    ├─→ 输入评论内容 → 实时字数统计
 │    │    │    ├─→ 点击发送按钮 → 发布评论
 │    │    │    │    ├─→ 发送成功 → 评论列表实时更新
 │    │    │    │    ├─→ 评论数量+1 → 底部按钮数字更新
 │    │    │    │    ├─→ 输入框清空 → 键盘收起
 │    │    │    │    └─→ 显示成功提示 → "评论发布成功"
 │    │    │    ├─→ 点击取消/返回 → 收起输入框
 │    │    │    └─→ 草稿保存 → 下次打开恢复内容
 │    │    │
 │    │    ├─→ 点击点赞按钮
 │    │    │    ↓
 │    │    │   【点赞状态切换】
 │    │    │    ├─→ 未点赞 → 点赞操作
 │    │    │    │    ├─→ 按钮动画 → 0.3s心跳动画+粒子特效
 │    │    │    │    ├─→ 图标变化 → 空心❤️变实心❤️
 │    │    │    │    ├─→ 颜色变化 → 灰色变红色#FF4444
 │    │    │    │    ├─→ 数量更新 → 点赞数+1实时显示
 │    │    │    │    └─→ 状态同步 → 服务器记录点赞状态
 │    │    │    │
 │    │    │    └─→ 已点赞 → 取消点赞
 │    │    │         ├─→ 按钮动画 → 0.2s缩放动画
 │    │    │         ├─→ 图标变化 → 实心❤️变空心❤️
 │    │    │         ├─→ 颜色变化 → 红色变灰色#999999
 │    │    │         ├─→ 数量更新 → 点赞数-1实时显示
 │    │    │         └─→ 状态同步 → 服务器更新点赞状态
 │    │    │
 │    │    ├─→ 点击收藏按钮
 │    │    │    ↓
 │    │    │   【收藏状态切换】
 │    │    │    ├─→ 未收藏 → 收藏操作
 │    │    │    │    ├─→ 按钮动画 → 0.3s闪烁+缩放动画
 │    │    │    │    ├─→ 图标变化 → 空心⭐变实心⭐
 │    │    │    │    ├─→ 颜色变化 → 灰色变金色#FFD700
 │    │    │    │    ├─→ 数量更新 → 收藏数+1实时显示
 │    │    │    │    ├─→ 收藏成功 → 添加到个人收藏列表
 │    │    │    │    └─→ 成功提示 → "已添加到收藏"toast
 │    │    │    │
 │    │    │    └─→ 已收藏 → 取消收藏
 │    │    │         ├─→ 按钮动画 → 0.2s缩放动画
 │    │    │         ├─→ 图标变化 → 实心⭐变空心⭐
 │    │    │         ├─→ 颜色变化 → 金色变灰色#999999
 │    │    │         ├─→ 数量更新 → 收藏数-1实时显示
 │    │    │         ├─→ 收藏移除 → 从个人收藏列表删除
 │    │    │         └─→ 取消提示 → "已取消收藏"toast
 │    │    │
 │    │    └─→ 点击评论按钮
 │    │         ↓
 │    │        【进入评论详情页面】
 │    │         ├─→ 页面转场 → 从底部滑入动画（0.3s）
 │    │         ├─→ 加载完整评论列表
 │    │         ├─→ 显示评论输入框
 │    │         └─→ 支持评论的所有交互功能
 │    │
 │    └─→ 评论预览区域交互
 │         ├─→ 点击评论项 → 进入评论详情页面
 │         ├─→ 点击评论者头像 → 查看评论者详情
 │         ├─→ 点击评论点赞数 → 点赞/取消点赞评论
 │         ├─→ 长按评论内容 → 显示评论操作菜单
 │         │    ├─→ 回复评论
 │         │    ├─→ 复制评论内容
 │         │    ├─→ 举报评论
 │         │    └─→ 删除评论（如果是自己的）
 │         └─→ 查看全部评论 → 跳转评论详情页面
 │
 ├─→ 【页面导航操作】（页面控制路径）
 │    ↓
 │   【导航栏交互】
 │    ├─→ 点击返回按钮
 │    │    ↓
 │    │   【返回上一页面】
 │    │    ├─→ 页面转场动画 → 向右滑出（0.3s）
 │    │    ├─→ 保存浏览状态 → 记录浏览时长和互动
 │    │    ├─→ 清理页面资源 → 释放图片内存
 │    │    └─→ 返回来源页面 → 动态列表/用户主页等
 │    │
│    └─→ 点击更多按钮
│         ↓
│        【显示分享/转发抽屉弹窗】
│         ├─→ 弹出底部抽屉 → 从底部滑入动画（0.3s + 阻尼效果）
│         ├─→ 抽屉背景遮罩 → 半透明黑色背景显示
│         ├─→ 抽屉容器展示 → 白色卡片460px高度 + 顶部圆角24px
│         └─→ 分享功能选项展示
│              ↓
│             【快捷分享功能区交互】
│              ├─→ 点击"好友"分享
│              │    ↓
│              │   【应用内好友分享流程】
│              │    ├─→ 打开好友列表选择页面
│              │    ├─→ 选择分享目标好友（支持多选）
│              │    ├─→ 添加分享文案（可选输入）
│              │    ├─→ 确认分享 → 发送给选中好友
│              │    ├─→ 分享成功 → "已发送给X位好友"提示
│              │    └─→ 返回动态详情页面
│              │
│              ├─→ 点击"微信"分享
│              │    ↓
│              │   【微信SDK分享流程】
│              │    ├─→ 检查微信安装状态
│              │    │    ├─→ 未安装 → 提示"请先安装微信"
│              │    │    └─→ 已安装 → 调用微信分享接口
│              │    ├─→ 生成分享内容
│              │    │    ├─→ 分享标题：动态标题
│              │    │    ├─→ 分享描述：动态内容摘要
│              │    │    ├─→ 分享图片：动态主图缩略图
│              │    │    └─→ 分享链接：动态详情页链接
│              │    ├─→ 唤起微信应用 → 显示分享选择
│              │    │    ├─→ 分享给朋友 → 选择微信好友
│              │    │    └─→ 分享到朋友圈 → 添加朋友圈文案
│              │    ├─→ 用户完成分享 → 返回应用
│              │    ├─→ 分享结果回调 → 成功/取消/失败状态
│              │    └─→ 显示分享结果提示
│              │
│              ├─→ 点击"QQ"分享
│              │    ↓
│              │   【QQ SDK分享流程】
│              │    ├─→ 检查QQ安装状态
│              │    │    ├─→ 未安装 → 提示"请先安装QQ"
│              │    │    └─→ 已安装 → 调用QQ分享接口
│              │    ├─→ 生成分享内容（相同的内容格式）
│              │    ├─→ 唤起QQ应用 → 显示分享选择
│              │    │    ├─→ 分享给QQ好友 → 选择QQ联系人
│              │    │    └─→ 分享到QQ空间 → 添加空间动态
│              │    ├─→ 用户完成分享 → 返回应用
│              │    ├─→ 分享结果回调 → 成功/取消/失败状态
│              │    └─→ 显示分享结果提示
│              │
│              ├─→ 点击"微博"分享
│              │    ↓
│              │   【微博SDK分享流程】
│              │    ├─→ 检查微博安装状态
│              │    │    ├─→ 未安装 → 打开微博Web分享页面
│              │    │    └─→ 已安装 → 调用微博分享接口
│              │    ├─→ 生成微博分享内容
│              │    │    ├─→ 微博文案：动态内容 + 话题标签
│              │    │    ├─→ 分享图片：动态图片（支持多图）
│              │    │    └─→ 添加来源链接
│              │    ├─→ 唤起微博应用 → 进入发布编辑页
│              │    ├─→ 用户编辑并发布微博
│              │    ├─→ 发布完成 → 返回应用
│              │    └─→ 显示分享成功提示
│              │
│              └─→ 点击"举报"功能
│                   ↓
│                  【举报功能流程】
│                   ├─→ 关闭分享抽屉 → 打开举报页面
│                   ├─→ 选择举报类型
│                   │    ├─→ 垃圾营销信息
│                   │    ├─→ 淫秽色情内容
│                   │    ├─→ 违法违规内容
│                   │    ├─→ 虚假信息传播
│                   │    ├─→ 侵犯他人权益
│                   │    └─→ 其他原因
│                   ├─→ 填写举报详细说明（可选）
│                   ├─→ 上传举报相关证据（可选）
│                   ├─→ 提交举报信息 → 服务器处理
│                   ├─→ 举报成功 → "感谢您的举报"提示
│                   └─→ 返回动态详情页面
│              ↓
│             【更多操作功能区交互】
│              ├─→ 点击"复制分享链接"
│              │    ↓
│              │   【分享链接复制流程】
│              │    ├─→ 生成动态分享链接
│              │    │    ├─→ 包含动态ID参数
│              │    │    ├─→ 包含用户推荐码（可选）
│              │    │    └─→ 包含分享来源标识
│              │    ├─→ 复制链接到系统剪贴板
│              │    ├─→ 显示复制成功提示 → "链接已复制"toast
│              │    ├─→ 关闭分享抽屉（可选）
│              │    └─→ 用户可在其他应用粘贴分享
│              │
│              ├─→ 点击"保存图片到相册"
│              │    ↓
│              │   【图片保存流程】
│              │    ├─→ 检查相册写入权限
│              │    │    ├─→ 无权限 → 请求相册权限
│              │    │    │    ├─→ 用户拒绝 → 提示手动开启权限
│              │    │    │    └─→ 用户同意 → 继续保存流程
│              │    │    └─→ 有权限 → 直接保存
│              │    ├─→ 下载原图到本地
│              │    │    ├─→ 显示下载进度（大图时）
│              │    │    ├─→ 下载失败 → 重试/提示网络错误
│              │    │    └─→ 下载成功 → 保存到系统相册
│              │    ├─→ 保存成功提示 → "已保存到相册"
│              │    ├─→ 提供查看选项 → 打开系统相册应用
│              │    └─→ 关闭分享抽屉
│              │
│              ├─→ 点击"不感兴趣"
│              │    ↓
│              │   【内容偏好调整流程】
│              │    ├─→ 标记当前动态为不感兴趣
│              │    ├─→ 分析用户不感兴趣原因
│              │    │    ├─→ 内容类型不匹配
│              │    │    ├─→ 发布者偏好调整
│              │    │    ├─→ 话题标签过滤
│              │    │    └─→ 地域内容过滤
│              │    ├─→ 更新推荐算法参数
│              │    ├─→ 减少相似内容推荐权重
│              │    ├─→ 显示反馈成功提示 → "将减少相似推荐"
│              │    └─→ 关闭分享抽屉
│              │
│              └─→ 点击"添加到收藏"
│                   ↓
│                  【收藏功能流程】
│                   ├─→ 检查当前收藏状态
│                   │    ├─→ 已收藏 → 提示"已在收藏夹中"
│                   │    └─→ 未收藏 → 执行收藏操作
│                   ├─→ 添加到用户收藏列表
│                   ├─→ 更新收藏数量 → 底部收藏按钮数字+1
│                   ├─→ 收藏成功提示 → "已添加到我的收藏"
│                   ├─→ 提供查看选项 → 跳转收藏夹页面
│                   └─→ 关闭分享抽屉
│              ↓
│             【抽屉关闭操作】
│              ├─→ 点击关闭按钮 → 抽屉收起动画（0.3s）
│              ├─→ 点击取消按钮 → 抽屉收起动画（0.3s）
│              ├─→ 点击背景遮罩 → 抽屉收起动画（0.3s）
│              ├─→ 下滑手势 → 跟手拖拽收起
│              └─→ 返回动态详情页面 → 恢复正常浏览状态
 │
 ├─→ 【内容卡片滑动操作】（手势交互路径）
 │    ↓
 │   【卡片滑动手势】
 │    ├─→ 上滑手势 → 展开完整内容
 │    │    ├─→ 内容卡片向上滑动
 │    │    ├─→ 显示更多动态信息
 │    │    ├─→ 展开完整评论列表
 │    │    └─→ 固定导航栏显示
 │    │
 │    ├─→ 下滑手势 → 收起内容卡片
 │    │    ├─→ 内容卡片向下滑动
 │    │    ├─→ 隐藏详细信息
 │    │    ├─→ 突出图片展示
 │    │    └─→ 沉浸式浏览模式
 │    │
 │    └─→ 左右滑动手势 → 切换动态内容（如果支持）
 │         ├─→ 向左滑动 → 下一条动态
 │         ├─→ 向右滑动 → 上一条动态
 │         ├─→ 滑动阻尼效果 → 平滑转场
 │         └─→ 预加载相邻内容 → 提升滑动体验
 │
 └─→ 【系统状态处理】（异常和边界情况处理）
      ↓
     【网络和数据状态处理】
      ├─→ 网络异常处理
      │    ├─→ 网络断开 → 显示离线提示
      │    │    ├─→ 缓存数据继续浏览
      │    │    ├─→ 禁用需要网络的操作
      │    │    └─→ 网络恢复自动重试
      │    │
      │    ├─→ 网络缓慢 → 优化加载策略
      │    │    ├─→ 优先加载文字内容
      │    │    ├─→ 降低图片质量
      │    │    └─→ 显示加载进度
      │    │
      │    └─→ 请求失败 → 错误处理和重试
      │         ├─→ 显示错误提示信息
      │         ├─→ 提供重试操作按钮
      │         └─→ 记录错误日志
      │
      ├─→ 数据异常处理
      │    ├─→ 动态已删除 → 显示删除提示
      │    ├─→ 用户已注销 → 显示用户不存在
      │    ├─→ 权限不足 → 显示权限提示
      │    └─→ 内容违规 → 显示违规提示
      │
      ├─→ 性能优化处理
      │    ├─→ 内存不足 → 清理图片缓存
      │    ├─→ 设备发热 → 降低动画频率
      │    ├─→ 电量不足 → 启用省电模式
      │    └─→ 存储空间不足 → 清理临时文件
      │
      └─→ 用户体验优化
           ├─→ 快速连续操作 → 防抖处理
           ├─→ 误触操作 → 确认对话框
           ├─→ 长时间停留 → 自动刷新内容
           └─→ 返回页面 → 恢复滚动位置
 ↓
【用户会话结束或继续其他操作】
 ├─→ 继续浏览当前动态 → 重复交互流程
 ├─→ 返回动态列表页面 → 查看其他动态
 ├─→ 进入用户详情页面 → 深度了解用户
 ├─→ 进入评论详情页面 → 参与评论互动
 ├─→ 进入话题页面 → 查看话题相关内容
 ├─→ 分享给好友 → 扩散优质内容
 └─→ 退出应用 → 保存浏览记录和偏好
 ↓
结束
```

---

## 📐 **关键设计要点总结**

### 🎨 **视觉设计特色**
- **沉浸式布局**：全屏图片展示 + 底部内容卡片的层叠设计
- **渐变遮罩**：图片底部渐变遮罩确保文字可读性
- **圆角卡片**：内容区域顶部24px大圆角营造层次感
- **紫色主题**：关注按钮和发送按钮采用渐变紫色#8A2BE2到#9370DB

### ⚡ **交互设计亮点**
- **手势滑动**：支持上下滑动展开/收起内容，左右滑动切换图片
- **实时反馈**：点赞收藏操作0.3s心跳动画 + 粒子特效
- **状态管理**：关注/点赞/收藏状态实时同步，支持乐观更新
- **防抖处理**：快速连续操作防抖，避免重复请求

### 🔧 **技术实现要点**
- **图片优化**：渐进式加载 + 网络自适应质量调整
- **内存管理**：大图片懒加载 + 离屏回收机制
- **缓存策略**：用户数据本地缓存 + 离线浏览支持
- **性能监控**：页面加载时间 + 交互响应时间统计

### 📱 **响应式适配**
- **安全区域**：iPhone刘海屏和Home指示器适配
- **状态栏**：透明状态栏 + 白色内容适配
- **键盘适配**：评论输入时自动调整布局高度
- **横屏支持**：图片全屏浏览时支持横屏模式

---

## 🎯 **设计原则应用**

### 📋 **SMART-V+ 增强原则**
- **S**tructure (结构化) ✅ 层次清晰的页面布局 + 明确的功能区域划分
- **M**odular (模块化) ✅ 用户信息模块、内容展示模块、交互操作模块独立设计
- **A**bstract (抽象化) ✅ 统一的按钮组件、评论组件可复用
- **R**eusable (可复用) ✅ 底部操作栏、用户信息卡片等组件标准化
- **T**estable (可测试) ✅ 每个交互流程都有明确的状态反馈
- **V**ersionable (版本化) ✅ 向后兼容的API设计 + 渐进式功能升级
- **+** **Detailed (细节化) ✅ 像素级精度设计 + 毫秒级动画时序

### 🎨 **4C+1 设计标准**
- **C**omplete (完整性) ✅ 覆盖所有用户场景 + 异常状态处理
- **C**onsistent (一致性) ✅ 统一的视觉风格 + 交互模式
- **C**lear (清晰性) ✅ 清晰的信息层级 + 明确的操作反馈
- **C**onfigurable (可配置) ✅ 个性化设置 + 权限控制
- **+1** **Customizable (定制化) ✅ 主题适配 + 用户偏好记忆

---

## 📊 **UI规格标准表**

| **组件类型** | **尺寸规格** | **颜色规格** | **动画时长** | **交互效果** |
|------------|------------|------------|------------|------------|
| 系统状态栏 | 44px高度 | 白色图标 | - | - |
| 导航按钮 | 32x32px圆形 | 半透明黑色背景 | 0.2s缩放 | 背景色变化 |
| 用户头像 | 48x48px圆形 | 2px白色边框 | - | 点击跳转 |
| 关注按钮 | 64x32px圆角16px | 渐变紫色#8A2BE2-#9370DB | 0.2s缩放 | 状态切换 |
| 动态标题 | 18sp粗体 | #000000黑色 | - | 长按复制 |
| 正文内容 | 16sp常规 | #333333灰黑色 | - | 长按选择 |
| 话题标签 | 14sp常规 | #1890FF蓝色 | - | 点击跳转 |
| 点赞按钮 | 20x20px图标 | 空心❤️/实心❤️ | 0.3s心跳+粒子 | 颜色状态切换 |
| 收藏按钮 | 20x20px图标 | 空心⭐/实心⭐ | 0.3s闪烁+缩放 | 颜色状态切换 |
| 评论输入框 | 自适应高度 | #F8F8F8背景 | 0.1s背景变化 | 聚焦弹出键盘 |
| 图片指示器 | 8x8px圆点 | 白色半透明 | 0.3s滑动 | 页面切换 |
| **分享抽屉容器** | **460px高度+安全区** | **白色背景+顶部圆角24px** | **0.3s滑入+阻尼** | **底部弹出** |
| 抽屉拖拽指示器 | 40x4px圆角2px | #CCCCCC灰色 | - | 拖拽收起 |
| 抽屉标题 | 18sp粗体 | #000000黑色 | - | 居中显示 |
| 分享图标容器 | 64x64px圆形 | 各平台品牌色 | 0.2s缩放 | 背景加深 |
| 分享图标 | 32x32px | 白色图标 | - | 平台调用 |
| 分享标题 | 12sp常规 | #000000黑色 | - | 功能说明 |
| 操作项容器 | 全宽x56px | 透明背景 | 0.1s背景变化 | 点击高亮 |
| 操作图标 | 24x24px | 功能色彩 | - | 状态指示 |
| 操作标题 | 16sp常规 | #000000黑色 | - | 功能说明 |
| 操作描述 | 14sp常规 | #999999灰色 | - | 详细说明 |
| 取消按钮 | 120x40px圆角20px | #F8F8F8背景+#E0E0E0边框 | 0.2s背景变化 | 关闭抽屉 |
| **视频播放按钮** | **64x64px圆形** | **白色三角+半透明背景** | **0.2s缩放** | **播放/隐藏** |
| 视频控制栏 | 全宽x48px | 半透明黑色背景 | 0.3s渐入渐出 | 播放时显示 |
| 播放暂停按钮 | 24x24px | 白色图标 | 0.1s切换 | 状态切换 |
| 视频进度条 | 自适应宽度x4px | #FFFFFF白色 | - | 拖拽跳转 |
| 视频时间显示 | 12sp常规 | #FFFFFF白色 | - | 实时更新 |
| **点赞状态-未激活** | **20x20px空心** | **#999999灰色** | **0.3s心跳准备** | **点击激活** |
| **点赞状态-已激活** | **20x20px实心** | **#FF4444红色** | **0.3s心跳+粒子** | **状态切换** |
| 点赞数字角标 | 16x16px圆形 | #FF4444红色背景+白色数字 | 0.2s缩放出现 | 显示排名 |
| **收藏状态-未激活** | **20x20px空心** | **#999999灰色** | **0.3s闪烁准备** | **点击激活** |
| **收藏状态-已激活** | **20x20px实心** | **#FFD700金色** | **0.3s闪烁+光芒** | **状态切换** |
| 话题标签 | 14sp常规 | #1890FF蓝色 | 0.1s背景变化 | 点击跳转 |
| 话题标签隐藏状态 | - | 透明/隐藏 | 0.2s渐出 | 条件隐藏 |

---

## 💡 **技术实现建议**

### 🔧 **前端技术栈**
```typescript
// React Native / Flutter 跨平台框架
// 状态管理：Redux Toolkit / MobX
// 图片处理：react-native-fast-image / cached_network_image
// 动画库：react-native-reanimated / Flutter Animation
// 手势识别：react-native-gesture-handler / GestureDetector
```

### 📡 **API接口设计**
```javascript
// 动态详情接口
GET /api/v1/dynamics/{dynamicId}
// 用户关注接口  
POST /api/v1/users/{userId}/follow
// 点赞收藏接口
POST /api/v1/dynamics/{dynamicId}/like
POST /api/v1/dynamics/{dynamicId}/favorite
// 评论接口
GET /api/v1/dynamics/{dynamicId}/comments
POST /api/v1/dynamics/{dynamicId}/comments

// 分享功能API接口
POST /api/v1/dynamics/{dynamicId}/share
// 请求体: { "shareType": "wechat|qq|weibo|link", "targetId": "好友ID(可选)" }
// 响应: { "shareUrl": "分享链接", "shareId": "分享记录ID" }

// 生成分享链接接口
GET /api/v1/dynamics/{dynamicId}/share-link
// 查询参数: ?userId={userId}&source={source}
// 响应: { "shareUrl": "https://app.com/dynamics/{dynamicId}?ref={userId}" }

// 举报接口
POST /api/v1/dynamics/{dynamicId}/report
// 请求体: { "reportType": "spam|adult|illegal|fake|other", "description": "详细说明", "evidence": ["证据文件"] }

// 不感兴趣标记接口
POST /api/v1/users/{userId}/preferences/dislike
// 请求体: { "contentId": "dynamicId", "contentType": "dynamic", "reason": "content_type|author|topic|location" }

// 图片保存统计接口
POST /api/v1/dynamics/{dynamicId}/save-image
// 请求体: { "imageUrl": "图片地址", "saveSuccess": true|false }
```

### 💾 **数据缓存策略**
```javascript
// 图片缓存：LRU + 时间过期 + 大小限制
// 用户数据：本地存储 + 实时同步
// 动态内容：离线缓存 + 增量更新
// 状态管理：乐观更新 + 失败回滚
// 分享链接：24小时缓存 + 动态生成
// 第三方SDK状态：本地存储 + 定期检测
```

### 🔗 **分享功能技术实现**
```typescript
// 分享抽屉组件架构
interface ShareDrawerProps {
  visible: boolean;
  dynamicData: DynamicData;
  onClose: () => void;
  onShareSuccess: (platform: string) => void;
}

// 分享平台配置
const shareConfigs = {
  wechat: {
    name: '微信',
    icon: '#07C160',
    sdk: 'react-native-wechat-lib',
    checkInstalled: () => WeChat.isWXAppInstalled(),
    share: (data) => WeChat.shareToSession(data)
  },
  qq: {
    name: 'QQ', 
    icon: '#1296DB',
    sdk: 'react-native-qq',
    checkInstalled: () => QQ.isQQInstalled(),
    share: (data) => QQ.shareToQQ(data)
  },
  weibo: {
    name: '微博',
    icon: '#FF8200', 
    sdk: 'react-native-weibo',
    checkInstalled: () => Weibo.isWeiboInstalled(),
    share: (data) => Weibo.shareToWeibo(data)
  }
};

// 分享数据处理
const generateShareContent = (dynamic: DynamicData) => ({
  title: dynamic.title || '精彩动态分享',
  description: dynamic.content.substring(0, 100) + '...',
  thumbImage: dynamic.images[0] || defaultShareImage,
  webpageUrl: `${API_BASE}/dynamics/${dynamic.id}?ref=${userId}`,
  scene: 0 // 0:分享给朋友 1:分享到朋友圈
});

// 权限管理
const requestPermissions = async () => {
  const cameraPermission = await PermissionsAndroid.request(
    PermissionsAndroid.PERMISSIONS.CAMERA
  );
  const storagePermission = await PermissionsAndroid.request(
    PermissionsAndroid.PERMISSIONS.WRITE_EXTERNAL_STORAGE
  );
  return { camera: cameraPermission, storage: storagePermission };
};

// 图片保存实现
const saveImageToGallery = async (imageUrl: string) => {
  try {
    // 检查权限
    const hasPermission = await requestPermissions();
    if (!hasPermission.storage) {
      throw new Error('需要存储权限');
    }
    
    // 下载图片
    const response = await RNFetchBlob.fetch('GET', imageUrl);
    const imagePath = response.path();
    
    // 保存到相册
    await CameraRoll.save(imagePath, { type: 'photo' });
    
    // 删除临时文件
    await RNFetchBlob.fs.unlink(imagePath);
    
    // 统计保存成功
    await api.post(`/dynamics/${dynamicId}/save-image`, {
      imageUrl,
      saveSuccess: true
    });
    
    return { success: true, message: '已保存到相册' };
  } catch (error) {
    await api.post(`/dynamics/${dynamicId}/save-image`, {
      imageUrl,
      saveSuccess: false,
      error: error.message
    });
    return { success: false, message: error.message };
  }
};
```

### 🎨 **抽屉动画实现**
```typescript
// React Native Animated 实现
const ShareDrawer = ({ visible, onClose }) => {
  const translateY = useRef(new Animated.Value(460)).current;
  const opacity = useRef(new Animated.Value(0)).current;
  
  useEffect(() => {
    if (visible) {
      // 显示动画
      Animated.parallel([
        Animated.timing(translateY, {
          toValue: 0,
          duration: 300,
          easing: Easing.bezier(0.25, 0.46, 0.45, 0.94),
          useNativeDriver: true,
        }),
        Animated.timing(opacity, {
          toValue: 0.5,
          duration: 300,
          useNativeDriver: true,
        }),
      ]).start();
    } else {
      // 隐藏动画
      Animated.parallel([
        Animated.timing(translateY, {
          toValue: 460,
          duration: 300,
          easing: Easing.bezier(0.25, 0.46, 0.45, 0.94),
          useNativeDriver: true,
        }),
        Animated.timing(opacity, {
          toValue: 0,
          duration: 300,
          useNativeDriver: true,
        }),
      ]).start();
    }
  }, [visible]);
  
  // 手势拖拽关闭
  const panGesture = Gesture.Pan()
    .onUpdate((event) => {
      if (event.translationY > 0) {
        translateY.setValue(event.translationY);
      }
    })
    .onEnd((event) => {
      if (event.translationY > 100) {
        onClose();
      } else {
        Animated.spring(translateY, {
          toValue: 0,
          useNativeDriver: true,
        }).start();
      }
    });
    
  return (
    <Modal transparent visible={visible} animationType="none">
      {/* 背景遮罩 */}
      <Animated.View 
        style={[styles.overlay, { opacity }]}
        onPress={onClose}
      />
      
      {/* 抽屉内容 */}
      <GestureDetector gesture={panGesture}>
        <Animated.View 
          style={[
            styles.drawer,
            { transform: [{ translateY }] }
          ]}
        >
          {/* 拖拽指示器 */}
          <View style={styles.dragIndicator} />
          
          {/* 抽屉内容 */}
          <ShareContent />
        </Animated.View>
      </GestureDetector>
    </Modal>
  );
};
```

---

## ✅ **质量评估检查清单**

### 📋 **基础架构完整性**
- [x] 树状图层级清晰（4级嵌套结构）
- [x] 流程图操作完整（包含异常处理）
- [x] 尺寸规格精确（具体px/sp数值）
- [x] 颜色标准统一（HEX色值标注）
- [x] 动画时长明确（毫秒级精度）
- [x] 符号使用规范（统一表情标识）
- [x] 注释说明详细（功能解释完整）
- [x] 交互逻辑完整（用户视角覆盖）
- [x] 响应式适配（多设备兼容）
- [x] 性能优化考虑（内存和网络）

### 🚀 **分享功能强化完整性**
- [x] 分享抽屉UI结构详细（460px高度+安全区域适配）
- [x] 快捷分享5平台设计（好友/微信/QQ/微博/举报）
- [x] 更多操作4功能完整（分享链接/保存图片/不感兴趣/收藏）
- [x] 第三方SDK集成方案（微信/QQ/微博SDK调用）
- [x] 权限管理处理（存储权限/相册权限）
- [x] 抽屉动画实现（0.3s滑入+阻尼+手势拖拽）
- [x] API接口设计完整（分享/举报/偏好/统计接口）
- [x] 技术实现代码示例（TypeScript组件架构）
- [x] 错误处理机制（网络失败/权限拒绝/APP未安装）
- [x] 用户体验优化（成功提示/进度显示/状态反馈）

### 🎯 **扩展功能覆盖**
- [x] 好友分享流程（好友列表选择+多选+文案编辑）
- [x] 第三方平台分享（微信朋友圈/QQ空间/微博发布）
- [x] 链接分享机制（动态链接生成+剪贴板复制）
- [x] 图片保存功能（权限检查+下载+相册保存+统计）
- [x] 内容偏好调整（不感兴趣标记+推荐算法调整）
- [x] 举报功能完整（举报类型+详细说明+证据上传）
- [x] 数据统计追踪（分享成功率+平台偏好+用户行为）

---

## 🌟 **架构设计亮点总结**

### 🎨 **视觉设计创新**
- **分层式抽屉设计**：460px高度抽屉 + 顶部圆角24px + 阴影8px层次感
- **5列网格分享布局**：64x64px圆形图标 + 品牌色彩体系（微信绿#07C160/QQ蓝#1296DB等）
- **拖拽交互指示器**：40x4px圆角指示条 + 跟手拖拽关闭体验
- **平台品牌化图标**：各平台官方色彩 + 统一32x32px白色图标设计

### ⚡ **交互体验优化**
- **多层级操作分流**：快捷分享（5选项）+ 更多操作（4功能）清晰分区
- **智能权限管理**：相册/存储权限预检 + 友好提示 + 手动引导开启
- **第三方SDK适配**：微信/QQ/微博安装检测 + 降级Web分享方案
- **手势拖拽关闭**：0.3s阻尼动画 + 100px阈值拖拽关闭机制

### 🔧 **技术架构健壮性**
- **组件化抽屉设计**：TypeScript接口定义 + 可复用组件架构
- **分享平台配置化**：统一shareConfigs配置 + 动态SDK调用
- **完整API设计**：分享/举报/偏好/统计4套接口 + 详细请求响应格式
- **性能优化策略**：图片缓存LRU + 分享链接24h缓存 + 状态乐观更新

### 📊 **业务逻辑完整性**
- **分享数据追踪**：分享成功率统计 + 平台偏好分析 + 用户行为路径记录
- **内容治理机制**：举报分类体系 + 不感兴趣算法调整 + 内容偏好学习
- **用户增长闭环**：分享链接推荐码 + 来源追踪 + 好友邀请机制
- **错误容错处理**：网络异常重试 + 权限拒绝引导 + APP未安装降级

---

## 🚀 **项目价值与影响**

### 💼 **商业价值**
- **用户增长引擎**：完善的分享机制 → 提升内容传播效率 → 获客成本降低
- **用户留存提升**：丰富的社交互动 → 增强用户粘性 → 日活跃度提升
- **内容生态建设**：分享激励机制 → 优质内容传播 → 社区活跃度增长

### 🎯 **技术价值**
- **标准化组件库**：可复用的分享抽屉组件 → 全应用统一分享体验
- **模块化架构设计**：清晰的功能边界 → 便于维护和扩展
- **完善的API体系**：标准化接口设计 → 前后端协作效率提升

### 📈 **用户体验价值**
- **一站式分享体验**：5平台+4功能集成 → 满足多元化分享需求
- **流畅的交互动画**：0.3s动画+阻尼效果 → 现代化的操作体验
- **智能化权限处理**：友好的权限引导 → 降低用户操作门槛

---

**这个动态图文详情页采用了现代社交应用的标准设计模式，通过详细的分享抽屉强化，重点突出了沉浸式视觉体验和完整的社交分享功能，完整覆盖了用户在内容消费、社交互动和内容传播方面的核心需求，为应用的用户增长和社区建设提供了坚实的技术支撑。**
