# 🎯 组局发布支付功能架构设计

> **基于原型图的标准化树状图 + 流程图设计**  
> **发布组局 + 支付确认的完整功能闭环**

---

## 📖 目录

- [功能概述](#功能概述)
- [树状图（页面结构视角）](#树状图页面结构视角)
- [流程图（用户操作视角）](#流程图用户操作视角)
- [UI设计特性](#ui设计特性)

---

## 🎯 功能概述

### 功能定位
**组局发布支付功能**是组局中心的核心发布流程，包含从活动类型选择、信息填写、参数设置到支付确认的完整发布闭环，支持6种活动类型的完整发布流程。

### 核心特性
- ✅ **6种活动类型选择**：探店、私影、台球、K歌、喝酒、按摩的图标化选择
- ✅ **完整信息填写**：标题、正文、系数项、约定项的结构化表单
- ✅ **灵活参数配置**：时间、地点、定价、人数、报名截止时间设置
- ✅ **支付确认流程**：金币支付、余额检查、费用明细展示
- ✅ **发布规则提示**：平台手续费、服务条款的透明化展示

---

## 🌳 树状图（页面结构视角）

```
【组局发布支付功能模块】★★★★
│
├── 【发布组局主页面】📱 (复杂表单页面 - 类型选择+信息填写+参数设置)
│   ├── 📱 状态栏 (系统状态栏显示)
│   │
│   ├── 🔝 发布导航栏 📋 (固定头部导航栏)
│   │   ├── 🔙「取消」按钮 (左侧取消按钮 + 确认提示弹窗)
│   │   ├── 📝 "发布组局" 页面标题 (居中显示 + 粗体字体)
│   │   └── 💾「保存」按钮 (右侧保存草稿按钮 - 可选功能)
│   │
│   ├── 🎯 活动类型选择区域 📋 (类型选择网格卡片)
│   │   ├── 📝 "类型" 区域标题 (左对齐标题文字)
│   │   ├── 📊 类型图标网格布局 (2行3列网格布局)
│   │   │   ├── 🏪《探店》图标按钮 📋 (黄色背景卡片 + 探店图标 + "探店"文字)
│   │   │   ├── 🎬《私影》图标按钮 📋 (彩色背景卡片 + 私影图标 + "私影"文字)
│   │   │   ├── 🎱《台球》图标按钮 📋 (蓝色背景卡片 + 台球图标 + "台球"文字)
│   │   │   ├── 🎤《K歌》图标按钮 📋 (粉色背景卡片 + K歌图标 + "K歌"文字)
│   │   │   ├── 🍺《喝酒》图标按钮 📋 (绿色背景卡片 + 喝酒图标 + "喝酒"文字)
│   │   │   └── 💆《按摩》图标按钮 📋 (橙色背景卡片 + 按摩图标 + "按摩"文字)
│   │   ├── 🎯 选中状态指示 (选中类型的边框高亮 + 对勾标识)
│   │   └── 📝 类型选择提示文字 (选择提示 + 必选标识)
│   │
│   ├── 📝 活动标题编辑区域 📋 (标题输入卡片)
│   │   ├── 📝 "标题" 区域标题 (左对齐标题 + 必填红色星号)
│   │   ├── 《标题输入框》📋 (单行文本输入框)
│   │   │   ├── 📝 "添加标题..." 占位符提示 (灰色占位符文字)
│   │   │   ├── 🎯 输入框聚焦状态 (蓝色边框 + 光标显示)
│   │   │   └── ✍️ 实时输入响应 (文字输入 + 字数统计更新)
│   │   └── 📊 字数统计显示 "0/30" (右下角字数提示 + 颜色变化)
│   │
│   ├── 📄 活动正文编辑区域 📋 (正文输入卡片)
│   │   ├── 📝 "正文" 区域标题 (左对齐标题 + 必填红色星号)
│   │   ├── 《正文输入框》📋 (多行文本输入区域)
│   │   │   ├── 📝 "添加正文..." 占位符提示 (灰色占位符文字)
│   │   │   ├── 🎯 输入框聚焦状态 (蓝色边框 + 光标显示)
│   │   │   ├── ✍️ 多行文本编辑 (自适应高度 + 换行支持)
│   │   │   └── 🎨 文本格式化 (富文本编辑功能 - 可选)
│   │   └── 📊 字数统计显示 "0/200" (右下角字数提示 + 进度条)
│   │
│   ├── ⚙️ 系数项设置区域 📋 (参数配置卡片)
│   │   ├── 📝 "系数项" 区域标题 (左对齐标题)
│   │   ├── 《系数项输入框》📋 (参数配置输入区域)
│   │   │   ├── 📝 "设置活动相关参数..." 占位符提示
│   │   │   ├── 🔧 参数配置界面 (参数设置弹窗/页面)
│   │   │   └── 📊 参数预览显示 (已设置参数的预览)
│   │   └── 💡 参数说明提示 (参数含义 + 设置建议)
│   │
│   ├── 📋 约定项设置区域 📋 (约定条件配置卡片)
│   │   ├── 📝 "约定项" 区域标题 (左对齐标题 + 必填红色星号)
│   │   ├── 《约定项配置区域》📋 (多项约定设置)
│   │   │   ├── 🕐 时间设置组件
│   │   │   │   ├── 「选择」按钮 → 🚨【时间选择弹窗】
│   │   │   │   │   ├── 📅 日期选择器 (日历组件)
│   │   │   │   │   ├── 🕐 时间选择器 (时分选择滚轮)
│   │   │   │   │   ├── ⏰ 持续时间设置 (活动时长选择)
│   │   │   │   │   └── 🎯「确认」按钮 (确认时间设置)
│   │   │   │   └── 📝 时间显示 (已选择时间的格式化显示)
│   │   │   ├── 📍 地点设置组件
│   │   │   │   ├── 「选择」按钮 → 🚨【地点选择弹窗】
│   │   │   │   │   ├── 🗺️ 地图选择器 (地图定位组件)
│   │   │   │   │   ├── 🔍 地址搜索框 (地址搜索输入)
│   │   │   │   │   ├── 📍 当前位置按钮 (GPS定位)
│   │   │   │   │   └── 🎯「确认」按钮 (确认地点选择)
│   │   │   │   └── 📝 地点显示 (已选择地点的详细地址)
│   │   │   ├── 💰 定价设置组件
│   │   │   │   ├── 「选择」按钮 → 🚨【定价设置弹窗】
│   │   │   │   │   ├── 💰 价格输入框 (数字输入 + 单位选择)
│   │   │   │   │   ├── 🏷️ 计费方式选择 (按时间/按人/固定价格)
│   │   │   │   │   ├── 💳 支付方式设置 (预付/到场付/分期)
│   │   │   │   │   └── 🎯「确认」按钮 (确认定价设置)
│   │   │   │   └── 📝 "0金币/小时" 价格显示 (当前设置的价格)
│   │   │   ├── 👥 人数设置组件
│   │   │   │   ├── 「选择」按钮 → 🚨【人数设置弹窗】
│   │   │   │   │   ├── 🔢 人数选择器 (数字滚轮/增减按钮)
│   │   │   │   │   ├── 👫 性别比例设置 (男女比例限制)
│   │   │   │   │   ├── 🎂 年龄限制设置 (年龄范围限制)
│   │   │   │   │   └── 🎯「确认」按钮 (确认人数设置)
│   │   │   │   └── 📝 人数显示 (已设置的人数限制)
│   │   │   └── ⏰ 报名截止时间设置组件
│   │   │       ├── 「选择」按钮 → 🚨【截止时间弹窗】
│   │   │       │   ├── 📅 截止日期选择 (日历组件)
│   │   │       │   ├── 🕐 截止时间选择 (时分选择)
│   │   │       │   ├── ⚡ 快速选择 (提前1小时/6小时/1天)
│   │   │       │   └── 🎯「确认」按钮 (确认截止时间)
│   │   │       └── 📝 截止时间显示 (格式化的截止时间)
│   │   ├── 📊 约定项预览区域 (所有设置项的汇总预览)
│   │   └── 💡 约定项格式提示 (格式说明 + 示例展示)
│   │
│   ├── 💡 发布提示区域 📋 (发布规则说明卡片)
│   │   ├── 📝 发布规则提示文字
│   │   │   ├── "发布组局，平台会收取一定手续费" (费用说明)
│   │   │   ├── "组局双方达，因活动的组织方默认" (责任说明)
│   │   │   ├── "组局双方达，因活动的时间的配录" (时间说明)
│   │   │   └── "组局完成后，劳动人缺少，将会进行一步的证据" (完成说明)
│   │   ├── 📄 服务条款链接 (用户协议 + 隐私政策链接)
│   │   ├── 🔐 安全提示信息 (安全注意事项 + 防骗提示)
│   │   └── 📞 客服联系方式 (问题咨询 + 投诉渠道)
│   │
│   └── 🔻 发布操作区域 (底部固定操作栏)
│       ├── 🚀「发布」按钮 📋 (主要CTA按钮)
│       │   ├── 🎯 按钮状态管理 (正常/加载/禁用状态)
│       │   ├── 💜 紫色主题样式 (全宽圆角按钮)
│       │   ├── ✅ 表单验证触发 (点击时验证所有必填项)
│       │   └── 🎬 点击动效 (按钮按下动画 + 反馈)
│       └── 💾 草稿保存提示 (自动保存状态 + 草稿恢复)
│
├── 【支付确认弹窗】🚨 (模态弹窗 - 支付流程确认)
│   ├── 🔝 弹窗头部区域 📋 (弹窗标题栏)
│   │   ├── 📝 "确认支付" 弹窗标题 (居中大字体显示)
│   │   ├── ❌「关闭」按钮 (右上角关闭按钮 + 确认提示)
│   │   └── 🎨 弹窗背景设计 (白色圆角背景 + 阴影效果)
│   │
│   ├── 💳 支付信息区域 📋 (支付详情卡片)
│   │   ├── 💰 支付金额显示
│   │   │   ├── 📝 "确认支付" 支付类型标签
│   │   │   ├── 💰 "200金币" 大字体金额显示 (红色突出)
│   │   │   ├── 🪙 金币图标显示 (货币标识图标)
│   │   │   └── 💱 汇率换算提示 (金币对人民币汇率)
│   │   ├── 💳 支付方式选择区域
│   │   │   ├── 📝 "金币支付" 支付方式标签
│   │   │   ├── 🪙 金币图标 (支付方式图标)
│   │   │   ├── 💰 "余额: 300" 当前余额显示 (实时余额)
│   │   │   ├── 🎯 选中状态指示 (紫色对勾标识)
│   │   │   └── 🔄 其他支付方式 (微信/支付宝/银行卡选项)
│   │   ├── 📊 费用明细区域
│   │   │   ├── 💰 基础费用 (组局发布基础费用)
│   │   │   ├── 🏢 平台服务费 (平台手续费明细)
│   │   │   ├── 🎁 优惠减免 (优惠券/折扣/积分抵扣)
│   │   │   └── 💯 总计金额 (最终支付金额计算)
│   │   └── 📋 支付条款区域
│   │       ├── 📝 "我同意支付以下费用，该金额(含服务费)" 确认文字
│   │       ├── 📄 支付服务协议 (支付条款链接)
│   │       ├── 🔒 安全提示信息 (支付安全保障说明)
│   │       └── 💸 退款政策说明 (退款条件 + 退款流程)
│   │
│   └── 🔻 支付操作区域 (弹窗底部操作)
│       ├── 💳「立即支付」按钮 📋 (主要支付按钮)
│       │   ├── 💜 紫色主题样式 (全宽圆角按钮)
│       │   ├── 🎯 支付状态管理 (正常/处理/成功/失败)
│       │   ├── 🔐 支付安全验证 (指纹/密码/短信验证)
│       │   ├── ⏳ 支付加载动画 (支付处理中的loading)
│       │   └── 🎬 成功动画效果 (支付成功的动画反馈)
│       ├── 🚫「取消支付」按钮 (次要取消按钮)
│       └── 💡 支付安全提示 (最后的安全提醒信息)
│
└── 🔧 系统支持层
    ├── 表单验证服务 (字段验证 + 格式检查 + 必填项检查)
    ├── 草稿管理服务 (自动保存 + 草稿恢复 + 草稿清理)
    ├── 支付处理服务 (支付验证 + 支付执行 + 支付回调)
    ├── 文件上传服务 (图片上传 + 压缩处理 + 存储管理)
    └── 内容审核服务 (敏感词过滤 + 内容审核 + 合规检查)
```

---

## 🔄 流程图（用户操作视角）

```
开始
 ↓
【进入发布组局页面】
 ↓
页面初始化加载
 ├─→ 加载用户信息和权限
 ├─→ 恢复草稿内容（如有）
 ├─→ 初始化表单状态
 └─→ 显示页面内容和组件
 ↓
【第一步：活动类型选择】
 ↓
显示6种活动类型网格
 ├─→ 🏪 点击"探店"图标
 │    ├─→ 选中状态：边框高亮 + 对勾显示
 │    ├─→ 其他图标取消选中状态
 │    └─→ 类型验证：✅ 已选择类型
 ├─→ 🎬 点击"私影"图标
 │    └─→ [相同的选中逻辑]
 ├─→ 🎱 点击"台球"图标
 │    └─→ [相同的选中逻辑]
 ├─→ 🎤 点击"K歌"图标
 │    └─→ [相同的选中逻辑]
 ├─→ 🍺 点击"喝酒"图标
 │    └─→ [相同的选中逻辑]
 └─→ 💆 点击"按摩"图标
      └─→ [相同的选中逻辑]
 ↓
【第二步：标题和正文填写】
 ↓
填写活动标题
 ├─→ 点击标题输入框
 │    ├─→ 输入框聚焦：边框变蓝 + 光标显示
 │    ├─→ 清除占位符文字
 │    └─→ 显示输入提示
 ├─→ 输入标题内容
 │    ├─→ 实时字数统计：显示"X/30"
 │    ├─→ 字数接近限制：文字变红色警告
 │    ├─→ 超出限制：阻止输入 + 提示音
 │    └─→ 敏感词检测：实时过滤 + 替换提示
 └─→ 标题验证：✅ 已填写标题（非空且合规）
 ↓
填写活动正文
 ├─→ 点击正文输入框
 │    ├─→ 输入框聚焦：边框变蓝 + 光标显示
 │    ├─→ 清除占位符文字
 │    └─→ 显示输入提示
 ├─→ 输入正文内容
 │    ├─→ 多行文本编辑：自适应高度
 │    ├─→ 实时字数统计：显示"X/200"
 │    ├─→ 支持换行和基础格式化
 │    ├─→ 字数接近限制：显示进度条
 │    └─→ 敏感词检测：实时过滤 + 替换提示
 └─→ 正文验证：✅ 已填写正文（非空且合规）
 ↓
【第三步：系数项设置（可选）】
 ↓
设置活动相关参数
 ├─→ 点击系数项输入框
 │    └─→ 打开参数配置界面
 ├─→ 配置活动参数
 │    ├─→ 设置活动特殊要求
 │    ├─→ 配置活动规则
 │    └─→ 保存参数设置
 └─→ 参数预览：显示已配置的参数
 ↓
【第四步：约定项设置（必填）】
 ↓
设置活动时间
 ├─→ 点击时间"选择"按钮
 │    └─→ 弹出时间选择弹窗
 ├─→ 选择活动日期
 │    ├─→ 在日历中点击日期
 │    ├─→ 验证日期有效性（不能选择过去日期）
 │    └─→ 确认日期选择
 ├─→ 选择活动时间
 │    ├─→ 滚动时间选择器
 │    ├─→ 设置开始时间
 │    ├─→ 设置结束时间或持续时长
 │    └─→ 验证时间逻辑合理性
 ├─→ 点击"确认"按钮
 │    ├─→ 关闭时间选择弹窗
 │    ├─→ 更新时间显示区域
 │    └─→ 时间验证：✅ 已设置时间
 └─→ 显示格式化的时间信息
 ↓
设置活动地点
 ├─→ 点击地点"选择"按钮
 │    └─→ 弹出地点选择弹窗
 ├─→ 选择地点方式
 │    ├─→ 点击"当前位置"按钮
 │    │    ├─→ 请求定位权限
 │    │    ├─→ 获取GPS位置
 │    │    ├─→ 显示当前位置地址
 │    │    └─→ 确认使用当前位置
 │    ├─→ 在地址搜索框输入地址
 │    │    ├─→ 实时搜索地址建议
 │    │    ├─→ 选择搜索结果
 │    │    ├─→ 在地图上显示位置
 │    │    └─→ 确认地址选择
 │    └─→ 在地图上直接点击选择
 │         ├─→ 点击地图获取坐标
 │         ├─→ 逆地理编码获取地址
 │         ├─→ 显示详细地址信息
 │         └─→ 确认地点选择
 ├─→ 点击"确认"按钮
 │    ├─→ 关闭地点选择弹窗
 │    ├─→ 更新地点显示区域
 │    └─→ 地点验证：✅ 已设置地点
 └─→ 显示完整的地址信息
 ↓
设置活动定价
 ├─→ 点击定价"选择"按钮
 │    └─→ 弹出定价设置弹窗
 ├─→ 设置价格金额
 │    ├─→ 在价格输入框输入数字
 │    ├─→ 验证价格格式和范围
 │    ├─→ 选择货币单位（金币/人民币）
 │    └─→ 实时计算最终价格
 ├─→ 选择计费方式
 │    ├─→ 选择"按时间"计费
 │    ├─→ 选择"按人数"计费
 │    ├─→ 选择"固定价格"计费
 │    └─→ 更新价格显示格式
 ├─→ 设置支付方式
 │    ├─→ 选择"预付款"方式
 │    ├─→ 选择"到场付"方式
 │    ├─→ 选择"分期付款"方式
 │    └─→ 配置支付条件
 ├─→ 点击"确认"按钮
 │    ├─→ 关闭定价设置弹窗
 │    ├─→ 更新价格显示区域
 │    └─→ 定价验证：✅ 已设置定价
 └─→ 显示格式化的价格信息
 ↓
设置参与人数
 ├─→ 点击人数"选择"按钮
 │    └─→ 弹出人数设置弹窗
 ├─→ 设置人数限制
 │    ├─→ 使用数字选择器设置最大人数
 │    ├─→ 设置最小人数要求
 │    ├─→ 验证人数逻辑合理性
 │    └─→ 实时更新人数显示
 ├─→ 设置性别比例（可选）
 │    ├─→ 设置男女比例要求
 │    ├─→ 选择"不限性别"选项
 │    └─→ 设置性别比例限制
 ├─→ 设置年龄限制（可选）
 │    ├─→ 设置最小年龄要求
 │    ├─→ 设置最大年龄要求
 │    └─→ 选择"不限年龄"选项
 ├─→ 点击"确认"按钮
 │    ├─→ 关闭人数设置弹窗
 │    ├─→ 更新人数显示区域
 │    └─→ 人数验证：✅ 已设置人数
 └─→ 显示人数和要求信息
 ↓
设置报名截止时间
 ├─→ 点击截止时间"选择"按钮
 │    └─→ 弹出截止时间设置弹窗
 ├─→ 选择截止时间方式
 │    ├─→ 选择快速时间选项
 │    │    ├─→ 点击"提前1小时"
 │    │    ├─→ 点击"提前6小时"
 │    │    ├─→ 点击"提前1天"
 │    │    └─→ 自动计算截止时间
 │    └─→ 自定义截止时间
 │         ├─→ 选择截止日期
 │         ├─→ 选择截止时间
 │         └─→ 验证截止时间合理性
 ├─→ 验证截止时间逻辑
 │    ├─→ 截止时间必须早于活动时间
 │    ├─→ 截止时间不能是过去时间
 │    └─→ 提供合理的报名时间窗口
 ├─→ 点击"确认"按钮
 │    ├─→ 关闭截止时间设置弹窗
 │    ├─→ 更新截止时间显示区域
 │    └─→ 截止时间验证：✅ 已设置截止时间
 └─→ 显示格式化的截止时间
 ↓
【第五步：检查和确认】
 ↓
查看约定项预览
 ├─→ 显示所有设置项的汇总
 ├─→ 检查信息完整性和准确性
 ├─→ 发现问题可返回修改
 └─→ 确认所有信息正确
 ↓
阅读发布规则和服务条款
 ├─→ 阅读平台手续费说明
 ├─→ 了解组局责任和义务
 ├─→ 查看服务条款和隐私政策
 └─→ 确认同意所有条款
 ↓
【第六步：发布确认】
 ↓
点击"发布"按钮
 ├─→ 触发表单验证
 │    ├─→ 验证活动类型已选择 ✅
 │    ├─→ 验证标题已填写且合规 ✅
 │    ├─→ 验证正文已填写且合规 ✅
 │    ├─→ 验证约定项完整性 ✅
 │    │    ├─→ 时间设置完整 ✅
 │    │    ├─→ 地点设置完整 ✅
 │    │    ├─→ 定价设置完整 ✅
 │    │    ├─→ 人数设置完整 ✅
 │    │    └─→ 截止时间设置完整 ✅
 │    └─→ 验证业务规则合规性 ✅
 ├─→ 表单验证通过
 │    ├─→ 显示"发布"按钮加载状态
 │    ├─→ 禁用表单编辑防止重复提交
 │    └─→ 准备发布数据
 └─→ 表单验证失败
      ├─→ 高亮显示错误字段
      ├─→ 显示具体错误提示
      ├─→ 滚动到第一个错误位置
      └─→ 等待用户修正后重试
 ↓
【第七步：支付确认（如有发布费用）】
 ↓
检查是否需要支付发布费用
 ├─→ 无需支付费用
 │    ├─→ 直接提交发布请求
 │    ├─→ 显示发布成功提示
 │    ├─→ 跳转到组局详情页
 │    └─→ 清理发布表单和草稿
 └─→ 需要支付发布费用
      ↓
     【弹出支付确认弹窗】
      ↓
     显示支付确认弹窗
      ├─→ 弹窗出现动画：从底部滑入
      ├─→ 背景遮罩显示：半透明黑色
      ├─→ 聚焦支付弹窗：禁用背景交互
      └─→ 加载支付信息和用户余额
      ↓
     显示支付详情信息
      ├─→ 显示支付金额："200金币"
      ├─→ 显示当前余额："余额: 300"
      ├─→ 显示支付方式：金币支付（选中状态）
      ├─→ 显示费用明细：基础费用+服务费
      └─→ 显示支付条款和确认文字
      ↓
     用户确认支付信息
      ├─→ 检查支付金额是否正确
      ├─→ 确认余额是否充足
      ├─→ 选择或确认支付方式
      └─→ 阅读并同意支付条款
      ↓
     支付方式和余额检查
      ├─→ 余额充足情况
      │    ├─→ "立即支付"按钮正常状态（紫色可点击）
      │    ├─→ 显示支付确认信息
      │    └─→ 准备执行支付流程
      ├─→ 余额不足情况
      │    ├─→ "立即支付"按钮禁用状态（灰色不可点击）
      │    ├─→ 显示"余额不足"提示
      │    ├─→ 提供"充值"按钮和链接
      │    └─→ 引导用户充值后返回
      └─→ 选择其他支付方式
           ├─→ 切换到微信支付
           ├─→ 切换到支付宝支付
           ├─→ 切换到银行卡支付
           └─→ 更新支付按钮和流程
      ↓
     执行支付流程
      ├─→ 点击"立即支付"按钮
      │    ├─→ 按钮状态变为加载中
      │    ├─→ 显示支付处理动画
      │    ├─→ 禁用取消支付按钮
      │    └─→ 开始支付验证流程
      ├─→ 支付安全验证
      │    ├─→ 指纹验证（如支持）
      │    ├─→ 密码验证（支付密码）
      │    ├─→ 短信验证（高额支付）
      │    └─→ 验证通过后继续支付
      ├─→ 支付请求处理
      │    ├─→ 向支付网关发送请求
      │    ├─→ 实时监控支付状态
      │    ├─→ 处理支付超时情况
      │    └─→ 等待支付结果回调
      └─→ 支付结果处理
           ├─→ 支付成功
           │    ├─→ 显示支付成功动画
           │    ├─→ 更新用户余额显示
           │    ├─→ 继续执行发布流程
           │    └─→ 关闭支付确认弹窗
           ├─→ 支付失败
           │    ├─→ 显示支付失败提示
           │    ├─→ 提供重试支付选项
           │    ├─→ 提供取消支付选项
           │    └─→ 恢复支付按钮状态
           └─→ 支付取消
                ├─→ 用户主动取消支付
                ├─→ 关闭支付确认弹窗
                ├─→ 返回发布页面
                └─→ 保持发布表单状态
      ↓
     处理支付完成后的操作
      ├─→ 支付成功后继续发布
      │    ├─→ 关闭支付确认弹窗
      │    ├─→ 提交组局发布请求
      │    ├─→ 显示发布处理进度
      │    └─→ 等待发布结果
      └─→ 支付失败或取消
           ├─→ 保持在发布页面
           ├─→ 保留用户填写的内容
           ├─→ 提供重新支付选项
           └─→ 允许修改后重新发布
 ↓
【第八步：发布处理和结果】
 ↓
提交发布请求
 ├─→ 组装发布数据
 │    ├─→ 组装活动基本信息
 │    ├─→ 组装约定项设置
 │    ├─→ 组装支付相关信息
 │    └─→ 添加用户和时间信息
 ├─→ 发送发布请求到服务器
 │    ├─→ 调用发布API接口
 │    ├─→ 传输加密的发布数据
 │    ├─→ 设置请求超时处理
 │    └─→ 监控网络请求状态
 └─→ 等待服务器处理结果
 ↓
服务器处理发布请求
 ├─→ 数据验证和安全检查
 │    ├─→ 验证用户发布权限
 │    ├─→ 检查内容合规性
 │    ├─→ 验证支付状态（如有）
 │    └─→ 检查业务规则
 ├─→ 内容审核处理
 │    ├─→ 敏感词过滤检查
 │    ├─→ 图片内容审核（如有）
 │    ├─→ 人工审核（如需要）
 │    └─→ 风险评估
 └─→ 生成发布结果
 ↓
处理发布结果
 ├─→ 发布成功
 │    ├─→ 显示发布成功提示
 │    │    ├─→ 成功动画效果
 │    │    ├─→ "发布成功"文字提示
 │    │    ├─→ 震动反馈（移动端）
 │    │    └─→ 自动消失的Toast提示
 │    ├─→ 清理发布相关数据
 │    │    ├─→ 清除表单内容
 │    │    ├─→ 删除草稿数据
 │    │    ├─→ 重置表单状态
 │    │    └─→ 清理临时文件
 │    ├─→ 页面跳转处理
 │    │    ├─→ 准备跳转到组局详情页
 │    │    ├─→ 传递组局ID参数
 │    │    ├─→ 执行页面转场动画
 │    │    └─→ 更新浏览历史记录
 │    └─→ 发送成功通知
 │         ├─→ 推送通知给关注用户
 │         ├─→ 更新用户活动记录
 │         ├─→ 统计发布成功数据
 │         └─→ 触发相关业务流程
 ├─→ 发布失败
 │    ├─→ 显示发布失败提示
 │    │    ├─→ 错误提示动画
 │    │    ├─→ 具体失败原因说明
 │    │    ├─→ 建议修改方案
 │    │    └─→ 重试发布选项
 │    ├─→ 保持发布页面状态
 │    │    ├─→ 保留用户填写内容
 │    │    ├─→ 保持表单可编辑状态
 │    │    ├─→ 恢复"发布"按钮状态
 │    │    └─→ 允许用户修改重试
 │    ├─→ 错误处理和日志
 │    │    ├─→ 记录错误日志
 │    │    ├─→ 上报错误统计
 │    │    ├─→ 分析失败原因
 │    │    └─→ 优化建议反馈
 │    └─→ 支付退款处理（如有）
 │         ├─→ 自动退款到原支付方式
 │         ├─→ 更新用户余额
 │         ├─→ 发送退款通知
 │         └─→ 记录退款记录
 └─→ 网络或系统错误
      ├─→ 显示网络错误提示
      ├─→ 提供重试发布选项
      ├─→ 保存当前发布状态
      └─→ 引导用户检查网络后重试
 ↓
【发布流程完成】
 ├─→ 成功发布：跳转到组局详情页
 ├─→ 失败重试：返回发布页面修改
 ├─→ 用户取消：保存草稿退出
 └─→ 系统错误：记录日志并提供客服
 ↓
结束
```

---

## 🎨 UI设计特性

### 1. 复杂页面组件设计
- **📱 发布组局主页面**：类型选择网格 + 多区域表单 + 约定项配置的垂直滚动布局
- **🚨 支付确认弹窗**：模态弹窗设计，支付信息展示 + 费用明细 + 操作按钮的卡片布局

### 2. 活动类型选择组件
- **🎯 6种类型图标网格**：2行3列布局，每个图标具有独特的背景色和图标设计
- **选中状态反馈**：边框高亮 + 对勾标识 + 点击动画效果
- **类型验证提示**：必选提示 + 实时验证状态显示

### 3. 表单输入组件强化
- **📝 标题输入框**：字数统计 + 实时验证 + 占位符动画 + 聚焦状态
- **📄 正文输入区域**：多行自适应 + 字数统计 + 进度条显示 + 富文本支持
- **⚙️ 系数项配置**：参数设置弹窗 + 预览显示 + 配置说明
- **📋 约定项设置**：5个子组件（时间/地点/定价/人数/截止时间）+ 选择弹窗

### 4. 约定项设置子组件
- **🕐 时间设置组件**：日历选择 + 时间滚轮 + 持续时间设置
- **📍 地点设置组件**：地图选择 + 地址搜索 + GPS定位 + 详细地址显示
- **💰 定价设置组件**：价格输入 + 计费方式 + 支付方式 + 价格预览
- **👥 人数设置组件**：数字选择 + 性别比例 + 年龄限制 + 要求设置
- **⏰ 截止时间组件**：快速选择 + 自定义时间 + 逻辑验证

### 5. 支付确认弹窗组件
- **💳 支付信息展示**：大字体金额 + 汇率换算 + 支付方式选择
- **📊 费用明细区域**：基础费用 + 服务费 + 优惠减免 + 总计金额
- **🔒 支付安全组件**：安全验证 + 支付状态 + 加载动画 + 结果反馈

### 6. 交互动效设计
- **类型选择动画**：图标点击缩放 + 边框高亮 + 对勾显示动效
- **弹窗展示动画**：各种设置弹窗的底部滑入和背景遮罩效果
- **表单验证反馈**：错误字段高亮 + 抖动动画 + 成功验证动效
- **支付处理动画**：支付按钮加载 + 处理进度 + 成功/失败状态动画

### 7. 响应式布局适配
- **类型网格布局**：2行3列网格在不同屏幕尺寸下的自适应
- **表单区域适配**：输入框宽度 + 字数统计位置 + 按钮尺寸的响应式
- **弹窗尺寸适配**：支付弹窗在不同设备上的尺寸和位置适配
- **约定项配置**：选择按钮和显示区域的弹性布局设计

---

*文档创建时间：2024年12月19日*  
*版本：v1.0*  
*基于：组局发布+支付确认原型图分析*  
*设计方法：强化树状图 + 详细流程图*  
*复杂度等级：★★★★ (发布+支付闭环功能)*
